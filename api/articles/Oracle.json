{"title":"Oracle","slug":"Oracle","date":"2020-02-22T12:39:59.314Z","updated":"2020-02-22T12:41:22.601Z","comments":true,"path":"api/articles/Oracle.json","photos":[],"link":"","excerpt":"Oracle注入基本特性查看版本:1<br>SELECT version FROM product_component_version WHERE substr(product, 1, 6) = 'Oracle';<br>注释符:","covers":null,"content":"<h2 id=\"Oracle注入\"><a href=\"#Oracle注入\" class=\"headerlink\" title=\"Oracle注入\"></a>Oracle注入</h2><h3 id=\"基本特性\"><a href=\"#基本特性\" class=\"headerlink\" title=\"基本特性\"></a>基本特性</h3><h4 id=\"查看版本\"><a href=\"#查看版本\" class=\"headerlink\" title=\"查看版本:\"></a><strong>查看版本:</strong></h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">version</span> <span class=\"keyword\">FROM</span> product_component_version <span class=\"keyword\">WHERE</span> <span class=\"keyword\">substr</span>(product, <span class=\"number\">1</span>, <span class=\"number\">6</span>) = <span class=\"string\">'Oracle'</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"注释符\"><a href=\"#注释符\" class=\"headerlink\" title=\"注释符:\"></a><strong>注释符:</strong><a id=\"more\"></a></h4><p>​    –  /**/</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'admin'</span><span class=\"keyword\">and</span><span class=\"comment\">/**/</span>(<span class=\"number\">1</span>=(<span class=\"keyword\">select</span>(<span class=\"number\">1</span>)<span class=\"keyword\">from</span>(dual)))<span class=\"comment\">--comment;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"时间延迟：\"><a href=\"#时间延迟：\" class=\"headerlink\" title=\"时间延迟：\"></a><strong>时间延迟：</strong></h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'admin'</span> <span class=\"keyword\">and</span> <span class=\"number\">1</span>=dbms_pipe.receive_message(<span class=\"string\">'t'</span>, <span class=\"number\">5</span>)<span class=\"comment\">--需dba</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'admin'</span> <span class=\"keyword\">and</span> <span class=\"number\">1</span>=(<span class=\"keyword\">select</span> DBMS_PIPE.RECEIVE_MESSAGE(<span class=\"string\">'t'</span>,<span class=\"number\">3</span>) <span class=\"keyword\">from</span> dual);<span class=\"comment\">--需public</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"基本操作\"><a href=\"#基本操作\" class=\"headerlink\" title=\"基本操作\"></a>基本操作</h3><h4 id=\"常见语句\"><a href=\"#常见语句\" class=\"headerlink\" title=\"常见语句\"></a>常见语句</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">命令行输入sqlplus 进入Oracle命令行界面</span><br><span class=\"line\"></span><br><span class=\"line\">查询当前“数据库”</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">name</span> <span class=\"keyword\">from</span> v$<span class=\"keyword\">database</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> instance_name <span class=\"keyword\">from</span> v$<span class=\"keyword\">instance</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">创建一个用于存放用户的表空间usersspace和用户testu</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">tablespace</span> usersspace <span class=\"keyword\">datafile</span> <span class=\"string\">'C:\\OracleDATA\\usersspace.ora'</span> <span class=\"keyword\">size</span> <span class=\"number\">10</span>M;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">user</span> testu <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"number\">123456</span> <span class=\"keyword\">default</span> <span class=\"keyword\">tablespace</span> usersspace <span class=\"keyword\">quota</span> <span class=\"number\">5</span>M <span class=\"keyword\">on</span> <span class=\"keyword\">users</span>;</span><br><span class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">all</span> <span class=\"keyword\">privileges</span> <span class=\"keyword\">to</span> testu;</span><br><span class=\"line\"></span><br><span class=\"line\">dba查看表空间</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> t.tablespace_name, <span class=\"keyword\">round</span>(<span class=\"keyword\">SUM</span>(<span class=\"keyword\">bytes</span> / (<span class=\"number\">1024</span> * <span class=\"number\">1024</span>)), <span class=\"number\">0</span>) ts_size </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> dba_tablespaces t, dba_data_files d </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> t.tablespace_name = d.tablespace_name </span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> t.tablespace_name; </span><br><span class=\"line\"></span><br><span class=\"line\">删除用户和表空间</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">user</span> testu;</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">tablespace</span> usersspace <span class=\"keyword\">including</span> <span class=\"keyword\">contents</span> <span class=\"keyword\">and</span> <span class=\"keyword\">datafiles</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">然后可使用testu登陆 查看当前用户的表空间</span><br><span class=\"line\"><span class=\"keyword\">select</span> username,default_tablespace <span class=\"keyword\">from</span> user_users;</span><br><span class=\"line\"></span><br><span class=\"line\">在新建的表空间usersspace中创建表users表</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"keyword\">users</span>(<span class=\"keyword\">id</span> <span class=\"built_in\">int</span> primary <span class=\"keyword\">key</span>,<span class=\"keyword\">name</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span>,<span class=\"keyword\">password</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>));</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">users</span>(<span class=\"keyword\">id</span>,<span class=\"keyword\">name</span>,<span class=\"keyword\">password</span>) <span class=\"keyword\">values</span> (<span class=\"number\">0</span>,<span class=\"string\">'admin'</span>,<span class=\"keyword\">md5</span>(<span class=\"string\">'123456'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">查看当前用户下表及其表空间</span><br><span class=\"line\"><span class=\"keyword\">select</span> table_name,tablespace_name <span class=\"keyword\">from</span> user_tables;</span><br><span class=\"line\">增改查删</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">users</span>(<span class=\"keyword\">id</span>,<span class=\"keyword\">name</span>,<span class=\"keyword\">password</span>) <span class=\"keyword\">values</span> (<span class=\"number\">0</span>,<span class=\"string\">'admin'</span>,<span class=\"string\">'123456'</span>);</span><br><span class=\"line\"><span class=\"keyword\">update</span> <span class=\"keyword\">users</span> <span class=\"keyword\">set</span> <span class=\"keyword\">name</span>=<span class=\"string\">'tom'</span> <span class=\"keyword\">where</span> <span class=\"keyword\">id</span>=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> usersspace.users;</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">id</span>=<span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">清空表</span><br><span class=\"line\"><span class=\"keyword\">truncate</span> <span class=\"keyword\">table</span> <span class=\"keyword\">users</span>;</span><br><span class=\"line\">删除表</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> <span class=\"keyword\">users</span>;</span><br></pre></td></tr></table></figure>\n","categories":[],"tags":[]}