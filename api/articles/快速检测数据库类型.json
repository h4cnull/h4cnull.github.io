{"title":"快速检测数据库类型","slug":"快速检测数据库类型","date":"2020-02-22T12:39:59.347Z","updated":"2020-02-22T12:40:30.334Z","comments":true,"path":"api/articles/快速检测数据库类型.json","photos":[],"link":"","excerpt":"Mysql时间延迟1<br>2<br>select * from testdb.users where id=1 union select 2,sleep(1),'a';<br>select * from testdb.users where id=1;select BENCHMARK(1000000,MD5('A'));#重复执行1000000次MD5('A') 虚拟机中约1.8秒<br>字符串连接","covers":null,"content":"<h4 id=\"Mysql\"><a href=\"#Mysql\" class=\"headerlink\" title=\"Mysql\"></a>Mysql</h4><p>时间延迟</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> testdb.users <span class=\"keyword\">where</span> <span class=\"keyword\">id</span>=<span class=\"number\">1</span> <span class=\"keyword\">union</span> <span class=\"keyword\">select</span> <span class=\"number\">2</span>,<span class=\"keyword\">sleep</span>(<span class=\"number\">1</span>),<span class=\"string\">'a'</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> testdb.users <span class=\"keyword\">where</span> <span class=\"keyword\">id</span>=<span class=\"number\">1</span>;<span class=\"keyword\">select</span> <span class=\"keyword\">BENCHMARK</span>(<span class=\"number\">1000000</span>,<span class=\"keyword\">MD5</span>(<span class=\"string\">'A'</span>));<span class=\"comment\">#重复执行1000000次MD5('A') 虚拟机中约1.8秒</span></span><br></pre></td></tr></table></figure>\n\n<p>字符串连接<a id=\"more\"></a></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'admin'</span> <span class=\"keyword\">and</span> <span class=\"string\">'ab'</span>=<span class=\"string\">'a'</span> <span class=\"string\">'b'</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'admin'</span> <span class=\"keyword\">and</span> <span class=\"string\">'ab'</span>=<span class=\"keyword\">concat</span>(<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Oracle\"><a href=\"#Oracle\" class=\"headerlink\" title=\"Oracle\"></a>Oracle</h4><p>字符串连接   需验证</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">'a'||'oracle'</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">CONCAT</span>(<span class=\"string\">'some'</span>,<span class=\"string\">'string'</span>)</span><br></pre></td></tr></table></figure>\n\n<p>版本</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> banner <span class=\"keyword\">FROM</span> v$<span class=\"keyword\">version</span>;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> banner <span class=\"keyword\">FROM</span> v$<span class=\"keyword\">version</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">rownum</span>=<span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"SQLServer\"><a href=\"#SQLServer\" class=\"headerlink\" title=\"SQLServer\"></a>SQLServer</h4><p>时间延迟</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> test..users <span class=\"keyword\">where</span> <span class=\"keyword\">id</span>=<span class=\"number\">1</span> WAITFOR DELAY <span class=\"string\">'0:0:3'</span></span><br></pre></td></tr></table></figure>\n\n<p>字符串连接</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> test..users <span class=\"keyword\">where</span> <span class=\"keyword\">id</span>=<span class=\"number\">1</span> <span class=\"keyword\">and</span> <span class=\"string\">'ab'</span>=<span class=\"string\">'a'</span>+<span class=\"string\">'b'</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"PostgreSQL\"><a href=\"#PostgreSQL\" class=\"headerlink\" title=\"PostgreSQL\"></a>PostgreSQL</h4><p>时间延迟</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> <span class=\"keyword\">users</span> <span class=\"keyword\">where</span> <span class=\"keyword\">name</span>=<span class=\"string\">'tom'</span>;<span class=\"keyword\">select</span> pg_sleep(<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>","categories":[],"tags":[]}